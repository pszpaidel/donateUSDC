#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "Running ESLint fix..."
npm run eslint:fix
if [ $? -ne 0 ]; then
  echo "ESLint fix failed."
  exit 1
fi

echo "Running Prettier fix..."
npm run prettier:fix
if [ $? -ne 0 ]; then
  echo "Prettier fix failed."
  exit 1
fi

# If both scripts succeed, you need to re-add any files that were changed by them
# This part can be tricky with husky alone, as linters might modify files that then need to be re-staged.
# `lint-staged` handles this automatically.
# For a simpler Husky-only setup, you might need to manually `git add` changed files if linters modify them.
# A more robust solution might involve `git add $(git diff --name-only --cached)` or similar,
# but be cautious as this can have unintended side effects.

echo "Pre-commit checks passed."
exit 0